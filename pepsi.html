<!DOCTYPE html>
<html>
	<head>
		<title>PepsiCo Taste Testing</title>
		<script src="http://code.jquery.com/jquery-latest.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.3.5/tabletop.min.js"></script>
    <!--The above is needed to getData from the google Doc. If not you would have to use another method that Erin has on lesson -->
		<script>
			$(document).ready(function(){

					//configure spreadsheet
				  var public_spreadsheet_url = '1Hb52msPcx4--BooWvgBLvs-LGvBMFJk1dAeRMEqWyuM';

					//function to get data from the spreadsheet
				  var getData = function () {
				    Tabletop.init({
				    	"key": public_spreadsheet_url,
			        "callback": processData,
			        "simpleSheet": true
				    });
				  }

					//editable function that processes data from the spreadsheet
					var processData = function(data){
						//console.log(data);
            console.log(data[0].name);//Name returns undefined too
            console.log(data[0].d1);
            console.log(data[0].d2);//do not put D2 because it will return undefined
            //console.log(data[0].3);
            //you cant have .3
					}

					//function that runs when the page is ready
				  getData();

          //FUTURE - get the number of drinks from the google sheets
          $('#myRange').change(function(){
            var x = document.getElementById("myRange").value;
            document.getElementById("demo").innerHTML = x;
          })

          function postToGoogle() {
            var first = $("#first").value;
            console.log(first);


            /*
            $.ajax({
              url: "https://docs.google.com/forms/d/FORM_KEY/formResponse",
                    data: {"entry.1023121230": first, "entry.1230072460": last},
                    type: "POST",
                    dataType: "xml",
                    statusCode: {
                        0: function() {
                            //Success message
                        },
                        200: function() {
                            //Success Message
                        }
                    }
            });*/
          }

          $('#form').submit(function(){
            console.log("pressed submit");
            //post to google sheets
            postToGoogle();
            return false;
          });
			});
		</script>
		<style>

		</style>
	</head>
	<body>
    <div id="form">
      <form class="pure-form">
          <fieldset>
            <legend>Form</legend>
            <input id="first" type="name" placeholder="First">
            <input id="last" type="name" placeholder="Last">


            <p>Directions. Taste the baseline and compare the drinks.</p>
            <input type="range" id="myRange" value="0" min="0" max="7">
            <p id="demo">0</p>
            <!-- maybe in future make this such that it corresponds to the value of slider instead of hard code
-->
            <button type="submit">Submit</button>
          </fieldset>
      </form>

    </div>
    <div id="graph">
    </div>
	</body>
</html>
